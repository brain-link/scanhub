workflow-manager.app.api.workflow
=================================

.. py:module:: workflow-manager.app.api.workflow

.. autoapi-nested-parse::

   Workflow manager endpoints.



Attributes
----------

.. autoapisummary::

   workflow-manager.app.api.workflow.router
   workflow-manager.app.api.workflow.producer


Classes
-------

.. autoapisummary::

   workflow-manager.app.api.workflow.RecoJob


Functions
---------

.. autoapisummary::

   workflow-manager.app.api.workflow.upload_result
   workflow-manager.app.api.workflow.download_result
   workflow-manager.app.api.workflow.get_data_from_file
   workflow-manager.app.api.workflow.get_image_file


Module Contents
---------------

.. py:class:: RecoJob

   Bases: :py:obj:`pydantic.BaseModel`


   RecoJob is a pydantic model for a reco job.


   .. py:attribute:: record_id
      :type:  int


   .. py:attribute:: input
      :type:  pydantic.StrictStr


.. py:data:: router

.. py:data:: producer

.. py:function:: upload_result(record_id: int, file: fastapi.UploadFile = File(...)) -> dict[str, str]
   :async:


   Upload workflow result.

   Parameters
   ----------
   record_id
       Id of the record, which is processed by workflow
   file, optional
       Data upload, e.g. reconstruction result, by default File(...)

   Returns
   -------
       Notification


.. py:function:: download_result(record_id: int) -> fastapi.responses.FileResponse
   :async:


   Download DICOM result.

   Parameters
   ----------
   record_id
       ID of the record the DICOM file belongs to.

   Returns
   -------
       DICOM file response


.. py:function:: get_data_from_file(file_path: str) -> Generator

   Open a file and read the data.

   Parameters
   ----------
   file_path
       Path of the file to open

   Yields
   ------
       File content


.. py:function:: get_image_file(record_id: int) -> fastapi.responses.StreamingResponse
   :async:


   Read image file data and content as streaming response.

   Parameters
   ----------
   record_id
       Record ID the image should be read for

   Returns
   -------
       Image file content

   Raises
   ------
   HTTPException
       File not found


