exam-manager.app.dal
====================

.. py:module:: exam-manager.app.dal

.. autoapi-nested-parse::

   Data acess layer (DAL) between fastapi endpoint and sql database.



Functions
---------

.. autoapisummary::

   exam-manager.app.dal.add_exam_data
   exam-manager.app.dal.get_exam_data
   exam-manager.app.dal.get_all_exam_data
   exam-manager.app.dal.get_all_exam_template_data
   exam-manager.app.dal.delete_exam_data
   exam-manager.app.dal.update_exam_data
   exam-manager.app.dal.add_workflow_data
   exam-manager.app.dal.get_workflow_data
   exam-manager.app.dal.get_all_workflow_data
   exam-manager.app.dal.get_all_workflows_template_data
   exam-manager.app.dal.delete_workflow_data
   exam-manager.app.dal.update_workflow_data
   exam-manager.app.dal.add_task_data
   exam-manager.app.dal.get_task_data
   exam-manager.app.dal.get_all_task_data
   exam-manager.app.dal.get_all_task_template_data
   exam-manager.app.dal.delete_task_data
   exam-manager.app.dal.update_task_data


Module Contents
---------------

.. py:function:: add_exam_data(payload: scanhub_libraries.models.BaseExam, creator: str) -> app.db.Exam
   :async:


   Create new exam.

   Parameters
   ----------
   payload
       Exam pydantic base model
   creator
       The username/id of the user who creats this exam

   Returns
   -------
       Database orm model of created exam


.. py:function:: get_exam_data(exam_id: uuid.UUID) -> app.db.Exam | None
   :async:


   Get exam by id.

   Parameters
   ----------
   exam_id
       Id of requested exam

   Returns
   -------
       Database orm model of exam or none


.. py:function:: get_all_exam_data(patient_id: int) -> list[app.db.Exam]
   :async:


   Get a list of all exams assigned to a certain patient.

   Parameters
   ----------
   patient_id
       Id of the parent patient entry, exams are assigned to

   Returns
   -------
       List of exam data base orm models


.. py:function:: get_all_exam_template_data() -> list[app.db.Exam]
   :async:


   Get a list of all exams assigned to a certain patient.

   Parameters
   ----------
   patient_id
       Id of the parent patient entry, exams are assigned to

   Returns
   -------
       List of exam data base orm models


.. py:function:: delete_exam_data(exam_id: uuid.UUID) -> bool
   :async:


   Delete exam by id. Also deletes associated workflows and tasks.

   Parameters
   ----------
   exam_id
       Id of the exam to be deleted

   Returns
   -------
       Success of deletion


.. py:function:: update_exam_data(exam_id: uuid.UUID, payload: scanhub_libraries.models.BaseExam) -> app.db.Exam | None
   :async:


   Update existing exam entry.

   Parameters
   ----------
   exam_id
       Id of the database entry to be updated

   payload
       Pydantic base exam model with data to be updated

   Returns
   -------
       Database orm model of updated exam


.. py:function:: add_workflow_data(payload: scanhub_libraries.models.BaseWorkflow, creator: str) -> app.db.Workflow
   :async:


   Add new workflow.

   Parameters
   ----------
   payload
       Workflow pydantic base model with data for workflow creation
   creator
       The username/id of the user who creats this exam

   Returns
   -------
       Database orm model of created workflow


.. py:function:: get_workflow_data(workflow_id: uuid.UUID) -> app.db.Workflow | None
   :async:


   Get workflow by id.

   Parameters
   ----------
   workflow_id
       Id of the requested workflow

   Returns
   -------
       Database orm model with data of requested workflow


.. py:function:: get_all_workflow_data(exam_id: uuid.UUID) -> list[app.db.Workflow]
   :async:


   Get a list of all workflows assigned to a certain exam.

   Parameters
   ----------
   exam_id
       Id of the parent exam entry, workflows are assigned to

   Returns
   -------
       List of workflow data base orm models


.. py:function:: get_all_workflows_template_data() -> list[app.db.Workflow]
   :async:


   Get a list of all workflows assigned to a certain exam.

   Parameters
   ----------
   exam_id
       Id of the parent exam entry, workflows are assigned to

   Returns
   -------
       List of workflow data base orm models


.. py:function:: delete_workflow_data(workflow_id: uuid.UUID) -> bool
   :async:


   Delete a workflow by ID. Cascade delete the associated tasks.

   Parameters
   ----------
   workflow_id
       ID of workflow to be deleted

   Returns
   -------
       Success of delete event


.. py:function:: update_workflow_data(workflow_id: uuid.UUID, payload: scanhub_libraries.models.BaseWorkflow) -> app.db.Workflow | None
   :async:


   Update existing workflow in database.

   Parameters
   ----------
   workflow_id
       Id of the workflow to be updateed
   payload
       Workflow pydantic base model with data to be updated

   Returns
   -------
       Workflow database orm model of updated workflow


.. py:function:: add_task_data(payload: scanhub_libraries.models.BaseTask, creator) -> app.db.Task
   :async:


   Add new task to database.

   Parameters
   ----------
   payload
       Task pydantic base model
   creator
       The username/id of the user who creats this task

   Returns
   -------
       Database orm model of created task


.. py:function:: get_task_data(task_id: uuid.UUID) -> app.db.Task | None
   :async:


   Get task by id.

   Parameters
   ----------
   task_id
       Id of the requested task

   Returns
   -------
       Database orm model with data of requested task


.. py:function:: get_all_task_data(workflow_id: uuid.UUID) -> list[app.db.Task]
   :async:


   Get a list of all tasks assigned to a certain workflow.

   Parameters
   ----------
   workflow_id
       Id of the parent workflow entry, tasks are assigned to

   Returns
   -------
       List of task data base orm models


.. py:function:: get_all_task_template_data() -> list[app.db.Task]
   :async:


   Get a list of all tasks assigned to a certain workflow.

   Parameters
   ----------
   workflow_id
       Id of the parent workflow entry, tasks are assigned to

   Returns
   -------
       List of task data base orm models


.. py:function:: delete_task_data(task_id: uuid.UUID) -> bool
   :async:


   Delete task by id.

   Parameters
   ----------
   task_id
       Id of the task to be deleted

   Returns
   -------
       Success of deletion


.. py:function:: update_task_data(task_id: uuid.UUID, payload: scanhub_libraries.models.BaseTask) -> app.db.Task | None
   :async:


   Update existing task in database.

   Parameters
   ----------
   task_id
       Id of the task to be updateed
   payload
       Task pydantic base model with data to be updated

   Returns
   -------
       Database orm model of updated task


