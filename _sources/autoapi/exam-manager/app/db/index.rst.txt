exam-manager.app.db
===================

.. py:module:: exam-manager.app.db

.. autoapi-nested-parse::

   Database file for the MRI sequence manager service.



Attributes
----------

.. autoapisummary::

   exam-manager.app.db.postgres_user_filepath
   exam-manager.app.db.postgres_password_filepath
   exam-manager.app.db.postgres_db_name_filepath
   exam-manager.app.db.postgres_user
   exam-manager.app.db.MappedBase
   exam-manager.app.db.Device


Classes
-------

.. autoapisummary::

   exam-manager.app.db.Base
   exam-manager.app.db.Exam
   exam-manager.app.db.Workflow
   exam-manager.app.db.Task
   exam-manager.app.db.Result


Functions
---------

.. autoapisummary::

   exam-manager.app.db.init_db


Module Contents
---------------

.. py:class:: Base

   Bases: :py:obj:`sqlalchemy.orm.DeclarativeBase`


   Declarative base class.


   .. py:method:: update(data: pydantic.BaseModel) -> None

      Update a exam entry.

      Parameters
      ----------
      data
          Data to be written



.. py:data:: postgres_user_filepath
   :value: '/run/secrets/scanhub_database_postgres_user'


.. py:data:: postgres_password_filepath
   :value: '/run/secrets/scanhub_database_postgres_password'


.. py:data:: postgres_db_name_filepath
   :value: '/run/secrets/scanhub_database_postgres_db_name'


.. py:data:: postgres_user

.. py:function:: init_db() -> None

   Initialize the database.


.. py:class:: Exam

   Bases: :py:obj:`Base`


   Abstract exam ORM model.


   .. py:attribute:: __tablename__
      :value: 'exam'



   .. py:attribute:: __table_args__


   .. py:attribute:: id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: creator
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: datetime_created
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: datetime_updated
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: workflows
      :type:  sqlalchemy.orm.Mapped[list[Workflow]]


   .. py:attribute:: patient_id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: name
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: description
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: indication
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: patient_height_cm
      :type:  sqlalchemy.orm.Mapped[int]


   .. py:attribute:: patient_weight_kg
      :type:  sqlalchemy.orm.Mapped[int]


   .. py:attribute:: comment
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: status
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.ItemStatus]


   .. py:attribute:: is_template
      :type:  sqlalchemy.orm.Mapped[bool]


.. py:class:: Workflow

   Bases: :py:obj:`Base`


   Workflow ORM model.


   .. py:attribute:: __tablename__
      :value: 'workflow'



   .. py:attribute:: __table_args__


   .. py:attribute:: id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: creator
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: datetime_created
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: datetime_updated
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: tasks
      :type:  sqlalchemy.orm.Mapped[list[Task]]


   .. py:attribute:: exam_id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: name
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: description
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: comment
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: status
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.ItemStatus]


   .. py:attribute:: is_template
      :type:  sqlalchemy.orm.Mapped[bool]


.. py:class:: Task

   Bases: :py:obj:`Base`


   Abstract task ORM model.


   .. py:attribute:: __tablename__
      :value: 'task'



   .. py:attribute:: __table_args__


   .. py:attribute:: id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: creator
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: datetime_created
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: datetime_updated
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: workflow_id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: name
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: description
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: comment
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: type
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.TaskType]


   .. py:attribute:: args
      :type:  sqlalchemy.orm.Mapped[dict[str, str]]


   .. py:attribute:: artifacts
      :type:  sqlalchemy.orm.Mapped[dict[str, str]]


   .. py:attribute:: destinations
      :type:  sqlalchemy.orm.Mapped[dict[str, str]]


   .. py:attribute:: status
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.ItemStatus]


   .. py:attribute:: progress
      :type:  sqlalchemy.orm.Mapped[int]


   .. py:attribute:: is_template
      :type:  sqlalchemy.orm.Mapped[bool]


   .. py:attribute:: results
      :type:  sqlalchemy.orm.Mapped[list[Result]]


.. py:class:: Result

   Bases: :py:obj:`Base`


   Abstract result ORM model.


   .. py:attribute:: __tablename__
      :value: 'result'



   .. py:attribute:: __table_args__


   .. py:attribute:: id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: datetime_created
      :type:  sqlalchemy.orm.Mapped[datetime.datetime]


   .. py:attribute:: task_id
      :type:  sqlalchemy.orm.Mapped[uuid.UUID]


   .. py:attribute:: progress
      :type:  sqlalchemy.orm.Mapped[float]


   .. py:attribute:: status
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.ItemStatus]


   .. py:attribute:: type
      :type:  sqlalchemy.orm.Mapped[scanhub_libraries.models.ResultType]


   .. py:attribute:: directory
      :type:  sqlalchemy.orm.Mapped[str]


   .. py:attribute:: filename
      :type:  sqlalchemy.orm.Mapped[str]


.. py:data:: MappedBase

.. py:data:: Device

